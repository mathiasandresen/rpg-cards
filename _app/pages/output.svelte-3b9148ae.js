import{S as K,i as Q,s as R,e as w,k as S,c as y,a as $,d as f,m as P,b,f as m,g as v,q as _,w as N,x as O,a9 as j,y as T,G as F,o as k,B as J,p as z,a1 as D,O as C,n as I}from"../chunks/index-f5ae0f2b.js";import{C as U,a as X,d as Y,p as Z}from"../chunks/card-d11a4468.js";import"../chunks/index-110dbbcd.js";import"../chunks/card-content-types-636390fa.js";var x=ee;function ee(n,e){if(!Array.isArray(n))throw new Error("expected an array for the first argument");if(e!=null&&typeof e!="number")throw new Error("expected a number or null/undefined for the second argument");e=e!=null?e:n.length;for(var c=n.length,o=[],r=0;r<c;r+=e)o.push(n.slice(r,r+e));return o}function V(n,e,c){const o=n.slice();return o[9]=e[c],o}function A(n,e,c){const o=n.slice();return o[12]=e[c],o}function G(n,e,c){const o=n.slice();return o[12]=e[c],o}function W(n){let e,c,o,r;return c=new U({props:{card:n[12]}}),{c(){e=w("div"),N(c.$$.fragment),o=S(),this.h()},l(i){e=y(i,"DIV",{style:!0,class:!0});var l=$(e);O(c.$$.fragment,l),o=P(l),l.forEach(f),this.h()},h(){b(e,"style",`--card-color: ${n[12].color};`),b(e,"class","card-slot svelte-1yo2udp"),j(e,"with-border",n[0].cardBackBorder>0)},m(i,l){v(i,e,l),T(c,e,null),F(e,o),r=!0},p(i,l){l&1&&j(e,"with-border",i[0].cardBackBorder>0)},i(i){r||(_(c.$$.fragment,i),r=!0)},o(i){k(c.$$.fragment,i),r=!1},d(i){i&&f(e),J(c)}}}function q(n){let e,c,o,r;return c=new X({props:{card:n[12]}}),{c(){e=w("div"),N(c.$$.fragment),o=S(),this.h()},l(i){e=y(i,"DIV",{style:!0,class:!0});var l=$(e);O(c.$$.fragment,l),o=P(l),l.forEach(f),this.h()},h(){b(e,"style",`--card-color: ${n[12].color};`),b(e,"class","card-slot backside svelte-1yo2udp"),j(e,"with-border",n[0].cardBackBorder>0)},m(i,l){v(i,e,l),T(c,e,null),F(e,o),r=!0},p(i,l){l&1&&j(e,"with-border",i[0].cardBackBorder>0)},i(i){r||(_(c.$$.fragment,i),r=!0)},o(i){k(c.$$.fragment,i),r=!1},d(i){i&&f(e),J(c)}}}function H(n){let e,c,o,r,i,l,u=n[9],a=[];for(let t=0;t<u.length;t+=1)a[t]=W(G(n,u,t));const E=t=>k(a[t],1,1,()=>{a[t]=null});let g=n[9],d=[];for(let t=0;t<g.length;t+=1)d[t]=q(A(n,g,t));const B=t=>k(d[t],1,1,()=>{d[t]=null});return{c(){e=w("div");for(let t=0;t<a.length;t+=1)a[t].c();c=S(),o=w("div");for(let t=0;t<d.length;t+=1)d[t].c();r=S(),i=w("div"),this.h()},l(t){e=y(t,"DIV",{class:!0});var h=$(e);for(let p=0;p<a.length;p+=1)a[p].l(h);h.forEach(f),c=P(t),o=y(t,"DIV",{class:!0,style:!0});var s=$(o);for(let p=0;p<d.length;p+=1)d[p].l(s);s.forEach(f),r=P(t),i=y(t,"DIV",{style:!0}),$(i).forEach(f),this.h()},h(){b(e,"class","paper svelte-1yo2udp"),b(o,"class","paper backside svelte-1yo2udp"),m(o,"--adjust-x",(n[0].adjust.x||0)+"mm"),m(o,"--adjust-y",(n[0].adjust.y||0)+"mm"),m(i,"break-after","page")},m(t,h){v(t,e,h);for(let s=0;s<a.length;s+=1)a[s].m(e,null);v(t,c,h),v(t,o,h);for(let s=0;s<d.length;s+=1)d[s].m(o,null);v(t,r,h),v(t,i,h),l=!0},p(t,h){if(h&9){u=t[9];let s;for(s=0;s<u.length;s+=1){const p=G(t,u,s);a[s]?(a[s].p(p,h),_(a[s],1)):(a[s]=W(p),a[s].c(),_(a[s],1),a[s].m(e,null))}for(I(),s=u.length;s<a.length;s+=1)E(s);z()}if(h&9){g=t[9];let s;for(s=0;s<g.length;s+=1){const p=A(t,g,s);d[s]?(d[s].p(p,h),_(d[s],1)):(d[s]=q(p),d[s].c(),_(d[s],1),d[s].m(o,null))}for(I(),s=g.length;s<d.length;s+=1)B(s);z()}(!l||h&1)&&m(o,"--adjust-x",(t[0].adjust.x||0)+"mm"),(!l||h&1)&&m(o,"--adjust-y",(t[0].adjust.y||0)+"mm")},i(t){if(!l){for(let h=0;h<u.length;h+=1)_(a[h]);for(let h=0;h<g.length;h+=1)_(d[h]);l=!0}},o(t){a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)k(a[h]);d=d.filter(Boolean);for(let h=0;h<d.length;h+=1)k(d[h]);l=!1},d(t){t&&f(e),D(a,t),t&&f(c),t&&f(o),D(d,t),t&&f(r),t&&f(i)}}}function te(n){let e,c,o=n[3],r=[];for(let l=0;l<o.length;l+=1)r[l]=H(V(n,o,l));const i=l=>k(r[l],1,1,()=>{r[l]=null});return{c(){e=w("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=y(l,"DIV",{id:!0,class:!0,style:!0});var u=$(e);for(let a=0;a<r.length;a+=1)r[a].l(u);u.forEach(f),this.h()},h(){b(e,"id","output"),b(e,"class","wrapper svelte-1yo2udp"),m(e,"--page-width",n[0].paperSize.width+"mm"),m(e,"--page-height",n[0].paperSize.height+"mm"),m(e,"--back-border-width",(n[0].cardBackBorder||0)+"mm"),m(e,"--card-width",n[1]+"mm"),m(e,"--card-height",n[2]+"mm")},m(l,u){v(l,e,u);for(let a=0;a<r.length;a+=1)r[a].m(e,null);c=!0},p(l,[u]){if(u&9){o=l[3];let a;for(a=0;a<o.length;a+=1){const E=V(l,o,a);r[a]?(r[a].p(E,u),_(r[a],1)):(r[a]=H(E),r[a].c(),_(r[a],1),r[a].m(e,null))}for(I(),a=o.length;a<r.length;a+=1)i(a);z()}(!c||u&1)&&m(e,"--page-width",l[0].paperSize.width+"mm"),(!c||u&1)&&m(e,"--page-height",l[0].paperSize.height+"mm"),(!c||u&1)&&m(e,"--back-border-width",(l[0].cardBackBorder||0)+"mm")},i(l){if(!c){for(let u=0;u<o.length;u+=1)_(r[u]);c=!0}},o(l){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)k(r[u]);c=!1},d(l){l&&f(e),D(r,l)}}}const L=2,M=5;function re(n,e,c){let o,r;C(n,Y,B=>c(4,o=B)),C(n,Z,B=>c(0,r=B));const i=r.cardSize.width,l=i+(r.cardBackBorder||0)*2+L/2,u=r.cardSize.height,a=u+(r.cardBackBorder||0)*2+L/2,g=(()=>{const B=Math.floor((r.paperSize.width-M*2)/l),t=Math.floor((r.paperSize.height-M*2)/a);return B*t})(),d=x(o,g);return[r,i,u,d]}class ce extends K{constructor(e){super();Q(this,e,re,te,R,{})}}export{ce as default};
